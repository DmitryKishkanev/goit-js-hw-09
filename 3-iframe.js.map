{"version":3,"file":"3-iframe.js","sources":["../src/js/iframe/3-iframe.js"],"sourcesContent":["import Player from '@vimeo/player';\nimport throttle from 'lodash.throttle';\nimport '../../css/iframe.css';\n\n// Получем в переменную наш vimeo-player из HTML\nconst iframe = document.querySelector('#vimeo-player');\n\n// Переменная для хранения localStorage ключа\nconst STORAGE_KEY = 'videoplayer-current-time';\n\n//Инициализируем плеер, как описано в библиотеке Vimeo\nconst player = new Player(iframe);\n// С помощью метода on() отслеживаем событие timeupdate. Throttle - ограничивает время обновляется - раз в секунду\nplayer.on('timeupdate', throttle(onPlay, 1000));\n\n// Функция обработчика слушателя события обновления времени\nfunction onPlay(data) {\n  localStorage.setItem(STORAGE_KEY, data.seconds);\n}\n\nconst timeStop = localStorage.getItem(STORAGE_KEY);\n\nif (timeStop) {\n  player.setCurrentTime(parseFloat(timeStop)).catch(function (error) {\n    switch (error.name) {\n      case 'RangeError':\n        console.warn(\n          'Указанное время воспроизведения находится вне диапазона доступной длительности видео.'\n        );\n        break;\n\n      default:\n        console.error('Произошла ошибка:', error);\n        break;\n    }\n  });\n}\n"],"names":["iframe","STORAGE_KEY","player","Player","throttle","onPlay","data","timeStop","error"],"mappings":"2GAKA,MAAMA,EAAS,SAAS,cAAc,eAAe,EAG/CC,EAAc,2BAGdC,EAAS,IAAIC,EAAOH,CAAM,EAEhCE,EAAO,GAAG,aAAcE,EAASC,EAAQ,GAAI,CAAC,EAG9C,SAASA,EAAOC,EAAM,CACpB,aAAa,QAAQL,EAAaK,EAAK,OAAO,CAChD,CAEA,MAAMC,EAAW,aAAa,QAAQN,CAAW,EAE7CM,GACFL,EAAO,eAAe,WAAWK,CAAQ,CAAC,EAAE,MAAM,SAAUC,EAAO,CACjE,OAAQA,EAAM,KAAI,CAChB,IAAK,aACH,QAAQ,KACN,uFACV,EACQ,MAEF,QACE,QAAQ,MAAM,oBAAqBA,CAAK,EACxC,KACH,CACL,CAAG"}